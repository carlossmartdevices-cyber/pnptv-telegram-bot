<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>PNPtv Community</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="new-app.css?v=1.0.0">
</head>
<body>
    <div id="app">
        <!-- Age Verification Gate -->
        <div id="age-gate" class="modal active">
            <div class="modal-content age-gate-content">
                <div class="age-gate-header">
                    <div class="logo-pulse">
                        <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <h1>Welcome to PNPtv</h1>
                    <p class="age-gate-subtitle">AI-Powered Age Verification</p>
                </div>

                <div class="age-verification-container">
                    <div id="camera-section" class="verification-section">
                        <div class="camera-frame">
                            <video id="camera-feed" autoplay playsinline></video>
                            <canvas id="camera-canvas" style="display:none;"></canvas>
                            <div class="camera-overlay">
                                <div class="face-guide"></div>
                            </div>
                            <div id="verification-status" class="verification-status">
                                <div class="status-icon">üë§</div>
                                <p>Position your face in the frame</p>
                                <small>Show an expression that demonstrates you understand our Terms of Service</small>
                            </div>
                        </div>

                        <div class="verification-actions">
                            <button id="start-verification-btn" class="btn btn-primary">
                                <span class="btn-icon">üîç</span>
                                Start Verification
                            </button>
                            <button id="skip-verification-btn" class="btn btn-secondary">
                                Skip Verification
                            </button>
                        </div>
                    </div>

                    <div class="tos-notice">
                        <p>By continuing, you confirm that you are 18+ and agree to our <a href="#" id="tos-link">Terms of Service</a></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main App Container -->
        <div id="main-app" class="hidden">
            <!-- Community Crystal Widget -->
            <div id="community-crystal" class="community-crystal">
                <div class="crystal-core">
                    <svg class="crystal-icon" viewBox="0 0 100 100">
                        <polygon points="50,10 90,35 90,75 50,90 10,75 10,35" fill="url(#crystal-gradient)" opacity="0.8"/>
                        <defs>
                            <linearGradient id="crystal-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#A020F0;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#9400D3;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <div class="crystal-pulse"></div>
                </div>
                <div id="crystal-tooltip" class="crystal-tooltip hidden">
                    <div class="tooltip-header">Recently Active</div>
                    <div id="crystal-users" class="crystal-users"></div>
                </div>
            </div>

            <!-- Navigation Bar -->
            <nav class="main-nav">
                <button class="nav-item active" data-page="feed">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                        <rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                        <rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                        <rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    <span>Feed</span>
                </button>
                <button class="nav-item" data-page="profile">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none">
                        <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2"/>
                        <path d="M6 21V19C6 16.7909 7.79086 15 10 15H14C16.2091 15 18 16.7909 18 19V21" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    <span>Profile</span>
                </button>
                <button class="nav-item" data-page="chatbot">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none">
                        <path d="M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    <span>Cristina</span>
                </button>
                <button class="nav-item" data-page="contact">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none">
                        <path d="M3 8L10.89 13.26C11.2187 13.4793 11.6049 13.5963 12 13.5963C12.3951 13.5963 12.7813 13.4793 13.11 13.26L21 8M5 19H19C19.5304 19 20.0391 18.7893 20.4142 18.4142C20.7893 18.0391 21 17.5304 21 17V7C21 6.46957 20.7893 5.96086 20.4142 5.58579C20.0391 5.21071 19.5304 5 19 5H5C4.46957 5 3.96086 5.21071 3.58579 5.58579C3.21071 5.96086 3 6.46957 3 7V17C3 17.5304 3.21071 18.0391 3.58579 18.4142C3.96086 18.7893 4.46957 19 5 19Z" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    <span>Contact</span>
                </button>
                <button class="nav-item performer-only hidden" data-page="performer">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none">
                        <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    <span>Performer</span>
                </button>
            </nav>

            <!-- Feed Page -->
            <div id="feed-page" class="page active">
                <div class="page-header">
                    <h1>Community Feed</h1>
                    <button id="create-post-btn" class="btn btn-icon-only">
                        <svg viewBox="0 0 24 24" fill="none">
                            <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2"/>
                            <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                </div>
                <div id="feed-container" class="feed-container">
                    <div class="feed-loading">
                        <div class="spinner"></div>
                        <p>Loading community posts...</p>
                    </div>
                </div>
            </div>

            <!-- Profile Page -->
            <div id="profile-page" class="page">
                <div class="page-header">
                    <h1>Profile</h1>
                    <button id="edit-profile-btn" class="btn btn-icon-only">
                        <svg viewBox="0 0 24 24" fill="none">
                            <path d="M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13" stroke="currentColor" stroke-width="2"/>
                            <path d="M18.5 2.5C18.8978 2.10217 19.4374 1.87868 20 1.87868C20.5626 1.87868 21.1022 2.10217 21.5 2.5C21.8978 2.89782 22.1213 3.43739 22.1213 4C22.1213 4.56261 21.8978 5.10217 21.5 5.5L12 15L8 16L9 12L18.5 2.5Z" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                </div>
                <div class="profile-container">
                    <div class="profile-header">
                        <div class="profile-avatar" id="profile-avatar">
                            <div class="avatar-placeholder">üë§</div>
                        </div>
                        <div class="profile-info">
                            <h2 id="profile-username">Loading...</h2>
                            <p class="profile-role" id="profile-role">Member</p>
                            <div class="profile-stats">
                                <div class="stat">
                                    <span class="stat-value" id="profile-posts-count">0</span>
                                    <span class="stat-label">Posts</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-value" id="profile-followers">0</span>
                                    <span class="stat-label">Followers</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile-bio">
                        <p id="profile-bio-text">No bio yet</p>
                    </div>
                    <div class="profile-posts">
                        <h3>My Posts</h3>
                        <div id="user-posts-container" class="posts-grid"></div>
                    </div>
                </div>
            </div>

            <!-- Chatbot Page (Cristina) -->
            <div id="chatbot-page" class="page">
                <div class="page-header">
                    <div class="chatbot-header-info">
                        <div class="cristina-avatar">AI</div>
                        <div>
                            <h1>Cristina</h1>
                            <p class="chatbot-status">AI Support Assistant</p>
                        </div>
                    </div>
                </div>
                <div class="chatbot-container">
                    <div id="chat-messages" class="chat-messages">
                        <div class="chat-message bot-message">
                            <div class="message-avatar">AI</div>
                            <div class="message-content">
                                <p>Hi! I'm Cristina, your AI assistant. How can I help you today?</p>
                                <span class="message-time">Just now</span>
                            </div>
                        </div>
                    </div>
                    <div class="chat-input-container">
                        <input type="text" id="chat-input" placeholder="Type your message..." />
                        <button id="send-chat-btn" class="btn btn-primary btn-icon-only">
                            <svg viewBox="0 0 24 24" fill="none">
                                <path d="M22 2L11 13M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Contact Page -->
            <div id="contact-page" class="page">
                <div class="page-header">
                    <h1>Contact Us</h1>
                </div>
                <div class="contact-container">
                    <div class="contact-intro">
                        <p>Have questions or feedback? We'd love to hear from you!</p>
                    </div>
                    <form id="contact-form" class="contact-form">
                        <div class="form-group">
                            <label for="contact-name">Name</label>
                            <input type="text" id="contact-name" required />
                        </div>
                        <div class="form-group">
                            <label for="contact-email">Email</label>
                            <input type="email" id="contact-email" required />
                        </div>
                        <div class="form-group">
                            <label for="contact-subject">Subject</label>
                            <select id="contact-subject" required>
                                <option value="">Select a topic...</option>
                                <option value="support">Technical Support</option>
                                <option value="feedback">Feedback</option>
                                <option value="billing">Billing</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="contact-message">Message</label>
                            <textarea id="contact-message" rows="6" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary btn-block">Send Message</button>
                    </form>
                </div>
            </div>

            <!-- Performer Panel Page -->
            <div id="performer-page" class="page">
                <div class="page-header">
                    <h1>Performer Panel</h1>
                </div>
                <div class="performer-container">
                    <div class="performer-stats">
                        <div class="stat-card">
                            <div class="stat-icon">üëÅÔ∏è</div>
                            <div class="stat-info">
                                <span class="stat-value">0</span>
                                <span class="stat-label">Profile Views</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚≠ê</div>
                            <div class="stat-info">
                                <span class="stat-value">0</span>
                                <span class="stat-label">Total Earnings</span>
                            </div>
                        </div>
                    </div>
                    <div class="performer-actions">
                        <button class="btn btn-primary btn-block">Start Live Stream</button>
                        <button class="btn btn-secondary btn-block">Upload Content</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Create Post Modal -->
        <div id="create-post-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Create Post</h2>
                    <button class="modal-close" id="close-post-modal">&times;</button>
                </div>
                <form id="create-post-form">
                    <div class="form-group">
                        <textarea id="post-content" placeholder="What's on your mind?" rows="4" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="post-image">Image URL (optional)</label>
                        <input type="url" id="post-image" placeholder="https://..." />
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-post-btn">Cancel</button>
                        <button type="submit" class="btn btn-primary">Post</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Notification Toast -->
        <div id="toast" class="toast hidden"></div>
    </div>

    <script src="new-app.js?v=1.0.0"></script>
</body>
</html>
