===============================================================================
EPAYCO PAYMENT TEST - STEP BY STEP GUIDE
===============================================================================

üìã TEST DETAILS
-------------------------------------------------------------------------------
Plan: Silver Plan
Price: $15 USD
Duration: 30 days
Test User ID: test_user_1760913856648
Invoice: silver_test_user_1760913856648_1760913856650

üîó PAYMENT LINK (Click or copy to browser)
-------------------------------------------------------------------------------
https://secure.payco.co/checkout.php?p_cust_id_cliente=1555482&p_key=e76ae8e9551df6e3b353434c4de34ef2dafa41bf&p_id_invoice=silver_test_user_1760913856648_1760913856650&p_description=Premium+features+with+ad-free+experience&p_amount=15&p_amount_base=15&p_tax=0&p_currency_code=USD&p_email=test_user_1760913856648%40telegram.user&p_signature=c681544177c64e4a34652cd1ffc0fec7&p_test_request=TRUE&p_url_response=https%3A%2F%2Fpnptv-telegram-bot-5dab055d3a53.herokuapp.com%2Fepayco%2Fresponse&p_url_confirmation=https%3A%2F%2Fpnptv-telegram-bot-5dab055d3a53.herokuapp.com%2Fepayco%2Fconfirmation&p_confirm_method=GET&p_extra1=test_user_1760913856648&p_extra2=silver&p_extra3=1760913856651&p_name_billing=Test+User&p_billing_address=N%2FA&p_billing_country=CO&p_billing_phone=3000000000

üí≥ TEST CARD DETAILS (ePayco Sandbox)
-------------------------------------------------------------------------------
SUCCESSFUL PAYMENT CARD:
  Card Number:  4575623182290326
  CVV:          123
  Expiry Date:  12/25 (December 2025)
  Name:         Test User (or any name)

REJECTED PAYMENT CARD (if you want to test failure):
  Card Number:  4151611527583283
  CVV:          123
  Expiry Date:  12/25

üìù STEP-BY-STEP INSTRUCTIONS
-------------------------------------------------------------------------------

STEP 1: Open Payment Page
  ‚úì Copy the payment link above
  ‚úì Paste into your browser (Chrome, Firefox, Edge, Safari)
  ‚úì Press Enter
  ‚úì You should see the ePayco payment form

STEP 2: Fill in Payment Details
  ‚úì Email: (already filled or use any email)
  ‚úì Card Number: 4575623182290326
  ‚úì CVV: 123
  ‚úì Expiry: 12/25
  ‚úì Name: Test User
  ‚úì Click "Pagar" or "Pay" button

STEP 3: Complete Payment
  ‚úì ePayco may show a 3D Secure simulation
  ‚úì Just click "Continue" or "Aprobar"
  ‚úì Wait for processing (should be quick in test mode)

STEP 4: Redirect Page
  You will be redirected to one of these pages:

  ‚úÖ SUCCESS PAGE:
     - Green gradient background
     - "¬°Pago Exitoso!" message
     - "Volver al Bot" button
     - URL: .../epayco/response?x_transaction_state=Aceptada...

  ‚ùå FAILURE PAGE:
     - Red gradient background
     - "Pago Rechazado" message
     - Instructions to retry

  ‚è≥ PROCESSING PAGE:
     - Orange gradient background
     - "Procesando Pago" message
     - Current status displayed

STEP 5: Check Results
  After completing payment, you should:

  ‚úì See the success/failure page (our webhook handler works!)
  ‚úì Webhook will be sent to Heroku (but bot may be down)
  ‚úì Check browser console (F12) for any errors
  ‚úì Note the transaction reference number

‚ö†Ô∏è IMPORTANT NOTES
-------------------------------------------------------------------------------
1. This is TEST MODE - no real money will be charged
2. The Heroku bot appears to be down, so:
   - ‚úÖ You WILL see the redirect page (webhook handler exists)
   - ‚ùå Subscription may NOT activate (bot needs to be running)
   - ‚ùå You won't receive Telegram notification (bot offline)

3. To fully test webhook processing, you need to:
   - Deploy the bot to Heroku/Railway, OR
   - Run bot locally with ngrok

üîç WHAT TO LOOK FOR
-------------------------------------------------------------------------------
‚úÖ GOOD SIGNS:
  - Payment form loads correctly
  - Payment processes successfully
  - Redirected to success page with green background
  - URL contains "x_transaction_state=Aceptada"

‚ö†Ô∏è EXPECTED LIMITATIONS (bot is down):
  - Subscription won't activate in database
  - No Telegram message will be sent
  - Webhook endpoint may return error

‚ùå ACTUAL PROBLEMS TO REPORT:
  - Payment link doesn't load
  - ePayco shows "Invalid signature" error
  - Redirect page shows 404 Not Found
  - Browser console shows CORS errors

üìä AFTER TESTING
-------------------------------------------------------------------------------
Come back and tell me:
  1. Did the payment form load? (Yes/No)
  2. Could you complete the payment? (Yes/No)
  3. What page did you see after payment? (Success/Failure/Error)
  4. Any error messages? (Copy them here)

Then I'll help you:
  - Deploy the bot so webhooks work
  - Verify subscription activation
  - Test the complete flow end-to-end

===============================================================================
READY TO TEST? üöÄ
===============================================================================
1. Copy the payment link above
2. Open in your browser
3. Use card: 4575623182290326, CVV: 123, Exp: 12/25
4. Complete payment
5. Come back and tell me what happened!
