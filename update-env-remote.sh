#!/bin/bash
# Script to update .env file on remote server

ENV_FILE="/var/www/pnptv-bot/.env"

# Update Telegram credentials
sed -i 's/^TELEGRAM_BOT_TOKEN=.*/TELEGRAM_BOT_TOKEN=8499797477:AAGd98d3HuIGI3xefqB7OM8dKZ2Tc5DKmqc/' "$ENV_FILE"
sed -i 's/^TELEGRAM_TOKEN=.*/TELEGRAM_TOKEN=8499797477:AAGd98d3HuIGI3xefqB7OM8dKZ2Tc5DKmqc/' "$ENV_FILE"
sed -i 's/^CHANNEL_ID=.*/CHANNEL_ID=-1002997324714/' "$ENV_FILE"
sed -i 's/^ADMIN_IDS=.*/ADMIN_IDS=8365312597/' "$ENV_FILE"

# Update Firebase credentials
sed -i 's/^FIREBASE_PROJECT_ID=.*/FIREBASE_PROJECT_ID=pnptv-b8af8/' "$ENV_FILE"
sed -i 's/^FIREBASE_CLIENT_EMAIL=.*/FIREBASE_CLIENT_EMAIL=firebase-adminsdk-fbsvc@pnptv-b8af8.iam.gserviceaccount.com/' "$ENV_FILE"
sed -i 's/^FIREBASE_STORAGE_BUCKET=.*/FIREBASE_STORAGE_BUCKET=pnptv-b8af8.appspot.com/' "$ENV_FILE"

# Update ePayco credentials
sed -i 's/^EPAYCO_PUBLIC_KEY=.*/EPAYCO_PUBLIC_KEY=6d5c47f6a632c0bacd5bb31990d4e994/' "$ENV_FILE"
sed -i 's/^EPAYCO_PRIVATE_KEY=.*/EPAYCO_PRIVATE_KEY=c3b7fa0d75e65dd28804fb9c18989693/' "$ENV_FILE"
sed -i 's/^EPAYCO_CUSTOMER_ID=.*/EPAYCO_CUSTOMER_ID=1565511/' "$ENV_FILE"
sed -i 's/^EPAYCO_P_CUST_ID=.*/EPAYCO_P_CUST_ID=1565511/' "$ENV_FILE"
sed -i 's/^EPAYCO_P_KEY=.*/EPAYCO_P_KEY=4ae1e189c9af6a730b71bc4f15546b78520ad338/' "$ENV_FILE"

# Update Daimo credentials
sed -i 's/^DAIMO_API_KEY=.*/DAIMO_API_KEY=pay-televisionlatina-VxZH9SQoHYasAoQmdWKuUw/' "$ENV_FILE"
sed -i 's/^DAIMO_APP_ID=.*/DAIMO_APP_ID=pnptv-bot/' "$ENV_FILE"
sed -i 's/^NEXT_PUBLIC_DAIMO_APP_ID=.*/NEXT_PUBLIC_DAIMO_APP_ID=pnptv-bot/' "$ENV_FILE"
sed -i 's|^DAIMO_WEBHOOK_TOKEN=.*|DAIMO_WEBHOOK_TOKEN=0x36f81c73d7cdbebe5380114a3589f3d3d710327d0c80fa223b451927fcc599e82a0f325d76e93113ee67f7a0d0899c7525abc61b59a4445dff2c790ee033a3e71c|' "$ENV_FILE"

# Update other config
sed -i 's/^TELEGRAM_BOT_USERNAME=.*/TELEGRAM_BOT_USERNAME=PNPtvBot/' "$ENV_FILE"
sed -i 's/^NEXT_PUBLIC_TELEGRAM_BOT_USERNAME=.*/NEXT_PUBLIC_TELEGRAM_BOT_USERNAME=PNPtvBot/' "$ENV_FILE"
sed -i 's|^SENTRY_DSN=.*|SENTRY_DSN=https://dab7b206e39473c2b1d706131f538f42@o4510204127870976.ingest.us.sentry.io/4510204133769216|' "$ENV_FILE"
sed -i 's|^JWT_SECRET=.*|JWT_SECRET=459c0de1110aa702fa9cca2a3f8d8e4c020853052245a6d034345e0f24214847fe23e7e7681abd211097c014006dfddb5f4a01468849b976a08c92587127e062|' "$ENV_FILE"
sed -i 's|^NEXT_PUBLIC_TREASURY_ADDRESS=.*|NEXT_PUBLIC_TREASURY_ADDRESS=0x98a1b6fdFAE5cF3A274b921d8AcDB441E697a5B0|' "$ENV_FILE"
sed -i 's|^NEXT_PUBLIC_REFUND_ADDRESS=.*|NEXT_PUBLIC_REFUND_ADDRESS=0x98a1b6fdFAE5cF3A274b921d8AcDB441E697a5B0|' "$ENV_FILE"

# Set secure permissions
chmod 600 "$ENV_FILE"

echo "Environment file updated successfully"
