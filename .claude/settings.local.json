{
  "env": {
    "NODE_ENV": "auto",
    "DEPLOY_MODE": "auto",
    "ADAPTIVE_CODE": "true"
  },
  "permissions": {
    "allow": [
      "Bash(cd /root/bot\\ 1 && node:*)",
      "Bash(node -e \"\nconsole.log(''=== Complete AI Chat Flow Test ===\\n'');\n\n// Simulate what happens when aiChat handler is called\nconst i18n = require(''./src/config/i18n'');\n\n// Test English\nconsole.log(''1. Testing English locale:'');\nconst enWelcome = i18n.t(''en'', ''aiChatWelcome'');\nconsole.log(''   Welcome length:'', enWelcome.length, ''chars'');\nconsole.log(''   First 60 chars:'', enWelcome.substring(0, 60) + ''...'');\n\n// Test Spanish  \nconsole.log(''\\n2. Testing Spanish locale:'');\nconst esWelcome = i18n.t(''es'', ''aiChatWelcome'');\nconsole.log(''   Welcome length:'', esWelcome.length, ''chars'');\nconsole.log(''   First 60 chars:'', esWelcome.substring(0, 60) + ''...'');\n\n// Test all AI chat messages\nconsole.log(''\\n3. Testing all AI chat message keys:'');\nconst keys = [''aiChatWelcome'', ''aiChatThinking'', ''aiChatError'', ''aiChatEnded'', ''aiChatNoAPI'', ''aiChatRateLimit''];\nkeys.forEach(key => {\n  const msg = i18n.t(''en'', key);\n  console.log(''   âœ“'', key + '':'', msg ? ''EXISTS'' : ''MISSING'');\n});\n\n// Test Mistral integration\nconsole.log(''\\n4. Testing Mistral AI integration:'');\ntry {\n  const { Mistral } = require(''@mistralai/mistralai'');\n  const apiKey = process.env.MISTRAL_API_KEY;\n  \n  if (apiKey) {\n    const mistral = new Mistral({ apiKey });\n    console.log(''   âœ“ Mistral client created successfully'');\n    console.log(''   âœ“ API Key:'', apiKey.substring(0, 10) + ''...'');\n  } else {\n    console.log(''   âœ— MISTRAL_API_KEY not found in environment'');\n  }\n} catch (e) {\n  console.log(''   âœ— Error:'', e.message);\n}\n\nconsole.log(''\\n=== Test Complete ==='');\n\")",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(chmod:*)",
      "Bash(/root/bot 1/DEPLOY_AI_CHAT_FIX.sh:*)",
      "Bash(cat src/bot/handlers/aiChat.js)",
      "Bash(node:*)",
      "Bash(pm2 restart:*)",
      "Bash(pm2 list:*)",
      "Bash(pm2 logs:*)",
      "Bash(pm2 env:*)",
      "Bash(pm2 stop:*)",
      "Bash(pm2 delete:*)",
      "Bash(rsync:*)",
      "Bash(pm2 start:*)",
      "Bash(cat:*)",
      "Bash(pm2 describe:*)",
      "Bash(env)",
      "Bash(ls:*)",
      "Bash(du:*)",
      "Bash(git log:*)",
      "Bash(pm2 save:*)",
      "Bash(NODE_ENV=production pm2 start:*)",
      "Bash(pm2 flush:*)",
      "Bash(WEBHOOK_URL=https://pnptv.app BOT_URL=https://pnptv.app pm2 start:*)",
      "Bash(git push:*)",
      "Bash(git config:*)",
      "Bash(tee:*)",
      "Bash(timeout 300 node:*)",
      "Bash(timeout 350 node:*)",
      "Bash(awk:*)",
      "Bash(pm2 status:*)",
      "Bash(npm install:*)",
      "Bash(curl:*)",
      "Bash(curl:*)",
      "Bash(cd:*)",
      "Bash(sudo cat:*)",
      "Bash(sudo sed:*)",
      "Bash(sudo nginx:*)",
      "Bash(sudo systemctl reload:*)",
      "Bash(xargs -I {} curl -s https://api.telegram.org/bot{}/getWebhookInfo)"
    ],
    "deny": [],
    "ask": []
  },
  "sandbox": {},
  "behavior": {
    "auto_commit": true,
    "auto_push": true,
    "auto_restart_pm2": true,
    "run_tests_before_commit": false,
    "suppress_explanations": true,
    "prefer_minimal_output": true,
    "adaptive_code": true,
    "inject_adaptive_template": true
  },
  "projects": [
    {
      "name": "easybots-store",
      "path": "/var/www/easybots-store",
      "deploy_command": "pm2 restart easybots-store"
    },
    {
      "name": "mototaxi-bot",
      "path": "/var/www/mototaxi-bot",
      "deploy_command": "pm2 restart mototaxi-bot"
    },
    {
      "name": "pnptv-bot",
      "path": "/var/www/pnptv-bot",
      "deploy_command": "pm2 restart pnptv-bot"
    },
    {
      "name": "social-hub",
      "path": "/var/www/social-hub",
      "deploy_command": "pm2 restart social-hub"
    }
  ],
  "aliases": {
    "deploy": "pm2 restart all",
    "logs": "pm2 logs --lines 50",
    "restart": "pm2 restart all",
    "status": "pm2 list"
  },
  "tools": {
    "git": true,
    "bash": true,
    "npm": true,
    "python": true,
    "docker": true
  },
  "templates": {
    "adaptive_js": {
      "file_extensions": [
        ".js",
        ".ts"
      ],
      "header": [
        "// ðŸ§  Adaptive Code Template â€” automatically generated by Claude",
        "import dotenv from 'dotenv';",
        "dotenv.config();",
        "const CONFIG = {",
        "  NODE_ENV: process.env.NODE_ENV || 'development',",
        "  API_URL: process.env.API_URL || '',",
        "  TOKEN: process.env.BOT_TOKEN || '',",
        "  PLAN_ID: process.env.PLAN_ID || 'default',",
        "  DEBUG: process.env.DEBUG === 'true'",
        "};",
        "",
        "// Avoid hardcoded constants â€” always reference CONFIG",
        "// Example: fetch(`${CONFIG.API_URL}/plans/${CONFIG.PLAN_ID}`)"
      ]
    },
    "adaptive_python": {
      "file_extensions": [
        ".py"
      ],
      "header": [
        "# ðŸ§  Adaptive Code Template â€” automatically generated by Claude",
        "import os",
        "from dotenv import load_dotenv",
        "load_dotenv()",
        "",
        "CONFIG = {",
        "    'ENV': os.getenv('NODE_ENV', 'development'),",
        "    'API_URL': os.getenv('API_URL', ''),",
        "    'TOKEN': os.getenv('BOT_TOKEN', ''),",
        "    'PLAN_ID': os.getenv('PLAN_ID', 'default'),",
        "    'DEBUG': os.getenv('DEBUG', 'false') == 'true'",
        "}",
        "# Always reference CONFIG variables â€” no hardcoded constants"
      ]
    }
  }
}
